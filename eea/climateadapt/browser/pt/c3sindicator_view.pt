<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="en"
  metal:use-macro="context/main_template/macros/master"
  >

  <body>
      <metal:main fill-slot="main">
          <h1>
            <span tal:content="context/title"></span>
            <img
              tal:attributes="src string:${context/absolute_url}/@@images/logo/thumb"
              style="float:right; padding:10px;" tal:condition="context/logo" />
            <img
              style="float:right; padding:10px;"
              tal:attributes="src string: ${context/absolute_url}/@@images/image/thumb"
              tal:condition="python: not getattr(context, 'logo') and getattr(context, 'image')" />
          </h1>
        <h3>Description</h3>
        <div tal:content="structure python: view.w['long_description'].render()">description here</div>

        <div class="column col-md-12" style="padding-top:20px;">
            <a href="#details" class="standard-button primary-button c3s_overview" onclick="c3sView('details');return false;" style="float: right; position: relative;">Explore in details</a>
            <a href="#" class="standard-button primary-button c3s_details" onclick="c3sView('overview');return false;" style="float: left; position: relative;">Go back</a>
        </div>
        <div class="column col-md-12">
            <hr style="clear:both;">
        </div>

        <div class="column col-md-12 c3s c3s_overview">
            <script>
                window._define = window.define;
                window.define = undefined;
            </script>
            <script type="text/javascript">
                window.cds_toolbox = { cds_public_path: 'https://cds.climate.copernicus.eu/toolbox/' };
            </script>

            <div class="t-ct">
                <div id="toolbox-app-overview">
                    <div class="pre-app-loading">
                        <img src="https://cds.climate.copernicus.eu/toolbox/assets/spinner.svg" alt="Loading">
                        <div>
                            ...loading configuration...
                        </div>
                    </div>
                </div>
            </div>

            <script type="text/javascript" src="https://cds.climate.copernicus.eu/toolbox/toolbox-4.16.0.js"></script>
            <script type="text/javascript" tal:content="structure view/c3sjs_overview">
                (function () {
                    document.addEventListener('DOMContentLoaded', function () {
                        window.cds_toolbox.runApp('toolbox-app-overview', 'https://cds.climate.copernicus.eu/workflows/c3s/hidden-app-health-mosquito-overview-web/master/configuration.json?configuration_version=3.0', {
                            workflowParams: {
                                "indicator": "season_length",
                            }
                        });
                    }, false);
                })();
            </script>
        </div>

        <div class="column col-md-12 c3s c3s_details">

            <div class="t-ct">
                <div id="toolbox-app-details">
                    <div class="pre-app-loading">
                        <img src="https://cds.climate.copernicus.eu/toolbox/assets/spinner.svg" alt="Loading">
                        <div>
                            ...loading configuration...
                        </div>
                    </div>
                </div>
            </div>

            <div id="c3s_details_js">
                <script type="text/javascript" tal:content="structure view/c3sjs_details">
                </script>
            </div>
        </div>
        <div style="clear:both;" />
        <script>
            window.define = window._define;
        </script>

        <style>
        .row.c3s {
            clear:both;
        }
        .c3s h2 {
            color:#000;
            background-color:#fff;
        }
        hr {
            background: #005C96;
            height: 4px;
        }
        </style>
        <script>
        if(window.location.hash && window.location.hash=="#details") {
            c3sView('details');
        } else {
            c3sView('overview');
        }
        function c3sView(type) {
            if (type=='details') {
                location.hash = '#details';
                $('.c3s_overview').hide();
                $('.c3s_details').show();
                window.cds_toolbox.runApp('toolbox-app-details', c3s_details_url, c3s_details_params);
            } else {
                location.hash = '';
                $('.c3s_details').hide();
                $('.c3s_overview').show();
            }
        }
        </script>

      </metal:main>
  </body>
</html>
