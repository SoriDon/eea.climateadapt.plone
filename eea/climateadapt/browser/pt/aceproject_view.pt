<html
  xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="en"
  metal:use-macro="context/main_template/macros/master"
  >
  <body>

    <metal:main fill-slot="body">
      <tal:main-macro metal:define-macro="content-core">

        <metal:macro use-macro="context/ace_macros/macros/ace_layout">
          <div metal:fill-slot="title-slot">
            <h1>
              <span tal:content="context/acronym">Acronym here</span>
              <span>: </span>
              <span tal:content="context/title">Title here</span>
            </h1>
          </div>

          <div metal:fill-slot="ace-left-slot">
            <metal:macro use-macro="context/ace_macros/macros/description" />

            <h4>Project information</h4>

            <metal:macro use-macro="context/ace_macros/macros/lead" />
            <metal:macro use-macro="context/ace_macros/macros/partners" />
            <metal:macro use-macro="context/ace_macros/macros/funding" />

            <h4 class="reference-title">Reference information</h4>
            <h5>Websites:</h5>
            <metal:macro use-macro="context/ace_macros/macros/websites" />

            <div metal:use-macro="context/ace_macros/macros/comments"></div>

          </div>

          <div metal:fill-slot="ace-right-slot">
            <metal:macro use-macro="context/ace_macros/macros/files" />

            <div class="macro-category">
              <h4>Updated:</h4>
              <div tal:content="python: context.EffectiveDate().split('T')[0]"> Date </div>
            </div>

            <div class="macro-category">
              <h4>Keywords:</h4>
              <metal:macro use-macro="context/ace_macros/macros/keywords" />
            </div>

            <div class="macro-category">
              <h4>Duration:</h4>
              <p tal:replace="structure context/duration"/>
            </div>

            <div class="macro-category">
              <h4>Climate impacts:</h4>
              <p tal:replace="structure python:view.w['climate_impacts'].render()"/>
            </div>

            <div class="macro-category">
              <h4>Elements:</h4>
              <p tal:replace="structure python:view.w['elements'].render()"/>
            </div>

            <div class="macro-category">
              <h4>Sectors:</h4>
              <p tal:replace="structure python:view.w['sectors'].render()"/>
            </div>

            <div class="macro-category">
              <h4>Geographic characterization:</h4>
              <tal:def define="geochar python:view.render_geochar(context.geochars)">

                <div tal:content="structure geochar" tal:condition="geochar"/>

                <tal:cond condition="not: geochar">
                  <div tal:condition="context/spatial_layer | nothing">
                    <div tal:repeat="spatial_layer context/spatial_layer">
                      <div tal:content="spatial_layer"/>
                    </div>
                  </div>

                  <p tal:condition="context/spatial_values">
                    Countries:
                    <span tal:replace="python:', '.join([x.upper() for x in context.spatial_values])"/>
                  </p>
                </tal:cond>

              </tal:def>
            </div>
          </div>
        </metal:macro>
        <div id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" tal:condition="not:ajax_load" />

      </tal:main-macro>
    </metal:main>

  </body>
</html>
