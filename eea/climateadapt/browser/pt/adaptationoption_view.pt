<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xml:lang="en"
  lang="en"
  metal:use-macro="context/main_template/macros/master"
  i18n:domain="eea.climateadapt">

  <body>
    <metal:main fill-slot="body">
      <tal:main-macro metal:define-macro="content-core">
        <metal:macro use-macro="context/ace_macros/macros/ace_layout">
          <div metal:fill-slot="title-slot">
              <metal:macro use-macro="context/ace_macros/macros/title_date" />
          </div>
          <div metal:fill-slot="ace-left-slot">

            <div tal:content="structure python: view.w['long_description'].render()"/>
            <!-- <h5 class="Adaptation-option-selector">Adaptation Option Description</h5> -->
            <h5 class="Adaptation-option-selector">Additional Details</h5>
            <ul>
              <li tal:condition="context/category"> <a href="#ao_category">Category</a> </li>
              <li tal:condition="context/ipcc_category"> <a href="#ipcc_category">IPCC categories</a> </li>
              <li tal:condition="python: context.stakeholder_participation is not None">
                   <a href="#stakeholder_participation">Stakeholder participation</a>
              </li>
              <li tal:condition="python: context.success_limitations is not None">
                   <a href="#success_factors">Success and Limiting Factors</a>
              </li>
              <li tal:condition="python: context.cost_benefit is not None">
                  <a href="#costs_benefits">Costs and Benefits</a>
              </li>
              <li tal:condition="python: context.legal_aspects is not None">
                  <a href="#legal">Legal Aspects</a>
              </li>
              <li tal:condition="python: context.implementation_time is not None">
                  <a href="#implementation">Implementation Time</a>
              </li>
              <li tal:condition="python: context.lifetime is not None or ''">
                  <a href="#life_time">Life Time</a>
              </li>
            </ul>

            <h5 class="Adaptation-option-selector">Reference information</h5>
            <ul>
              <li> <a href="#websites">Websites</a> </li>
              <li> <a href="#source">Source</a> </li>
            </ul>

            <h4>Adaptation Details</h4>
            <p></p>
            <div id="ao_category" tal:condition="context/category">
              <p><em class="adapt-option-em" style="text-decoration: underline">Category</em></p>
              <div tal:repeat="categ context/category">
                <p>
                  <tal:block content="categ | nothing"/>
                </p>
              </div>
            </div>
            <div id="ipcc_category" tal:condition="context/ipcc_category">
              <p><em class="adapt-option-em" style="text-decoration: underline">IPCC categories</em></p>
              <div tal:repeat="ipcc_categ context/ipcc_category">
                <p>
                  <tal:block content="ipcc_categ | nothing"/>
                </p>
              </div>
            </div>
            <div tal:condition="python: context.stakeholder_participation is not None">
                <p id="stakeholder_participation">
                  <em class="adapt-option-em" style="text-decoration: underline">Stakeholder participation</em>
                  <tal:block content="structure python: view.w['stakeholder_participation'].render()"/>
                </p>
            </div>
            <div tal:condition="python: context.success_limitations is not None">
                <p id="success_factors">
                  <em class="adapt-option-em" style="text-decoration: underline">Success and Limiting Factors</em>
                  <tal:block content="structure python: view.w['success_limitations'].render()"/>
                </p>
            </div>
            <div tal:condition="python: context.cost_benefit is not None">
                <p id="costs_benefits">
                  <em class="adapt-option-em" style="text-decoration: underline">Costs and Benefits</em>
                  <tal:block content="structure python: view.w['cost_benefit'].render()"/>
                </p>
            </div>
            <div tal:condition="python: context.legal_aspects is not None">
                <p id="legal">
                  <em class="adapt-option-em" style="text-decoration: underline">Legal Aspects</em>
                  <tal:block content="structure python: view.w['legal_aspects'].render()"/>
                </p>
            </div>
            <div tal:condition="python: context.implementation_time is not None">
                <p id="implementation">
                  <em class="adapt-option-em" style="text-decoration: underline">Implementation Time</em>
                  <tal:block content="structure python: view.w['implementation_time'].render()"/>
                </p>
            </div>
            <div tal:condition="python: context.lifetime is not None">
                <p id="life_time">
                  <em class="adapt-option-em" style="text-decoration: underline">Life Time</em>
                  <tal:block content="structure python: view.w['lifetime'].render()"/>
                </p>
            </div>

            <h4 class="reference-title">Reference information</h4>

            <h5 id="websites" style="text-decoration: underline" class="Adaptation-option-selector">Websites:</h5>
            <metal:macro use-macro="context/ace_macros/macros/websites" />

            <h5 id="source" style="text-decoration: underline" class="Adaptation-option-selector">Source:</h5>
            <div tal:content="structure python: view.w['source'].render()">Source here</div>

            <div metal:use-macro="context/ace_macros/macros/comments"></div>
          </div>

          <div metal:fill-slot="ace-right-slot">
            <metal:macro use-macro="context/ace_macros/macros/files" />
            <div class="macro-category">
              <h4>Updated:</h4>
              <div tal:content="python: context.EffectiveDate().split('T')[0]"> Date </div>
            </div>

            <div class="macro-category">
              <div tal:condition="nothing | python: context.year != 0">
                <h4>Year:</h4>
                <tal:block content="structure context/year"/>
              </div>
            </div>

            <div class="macro-category">
              <h4>Keywords:</h4>
              <metal:macro use-macro="context/ace_macros/macros/keywords" />
            </div>

            <div class="macro-category">
              <h4>Sectors:</h4>
              <tal:block content="structure python:view.w['sectors'].render()"/>
            </div>

            <div class="macro-category">
              <h4>Climate impacts:</h4>
              <tal:block content="structure python:view.w['climate_impacts'].render()"/>
            </div>

            <div class="macro-category">
              <div tal:condition="python: view.governance_level() != ''">
                <h4>Governance level:</h4>
                <div tal:repeat="level python: view.governance_level()">
                  <span tal:content="level"></span>
                </div>
              </div>
            </div>

            <div class="macro-category">
              <div tal:condition="python: view.render_geochar(context.geochars)">
                <h4>Geographic characterisation:</h4>
                <metal:macro use-macro="context/ace_macros/macros/geochar" />
              </div>
            </div>

            <div class="macro-category">
              <div tal:define="dictionary python: view.get_related_casestudies();
                titles python: dictionary['title'];
                urls python: dictionary['url']"
                tal:condition="python: len(dictionary.values()[0]) > 0">
                <h4>Case studies related to this option:</h4>
                <div tal:repeat="item python: range(len(titles))">
                  <a class="related-items" tal:content="python: titles[item]" href=""
                    tal:attributes="href python: urls[item]"/>
                </div>
              </div>
            </div>

          </div>
        </metal:macro>
        <div id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" tal:condition="not:ajax_load" />

      </tal:main-macro>
    </metal:main>
  </body>
</html>
