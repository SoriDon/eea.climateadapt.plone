<metal:use-macro use-macro="context/main_template/macros/master">
  <!-- <metal:fill-slot fill-slot="style_slot"> </metal:fill-slot> -->

  <metal:fill-slot fill-slot="javascript_head_slot">

    <script>
      window._old_define = window.define;
      window.define = undefined;
    </script>

    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.js"></script>
    <script src="https://d3js.org/d3-queue.v3.min.js"></script>

    <!-- Force stuff -->
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
    <script src="https://d3js.org/d3-quadtree.v1.min.js"></script>
    <script src="https://d3js.org/d3-timer.v1.min.js"></script>
    <script src="https://d3js.org/d3-force.v1.min.js"></script>

    <script>
      // window.define = window._old_define;
    </script>

    <script type="text/javascript" src="/++resource++collective.js.bootstrap/js/bootstrap.min.js"></script>

  </metal:fill-slot>

  <metal:fill-slot fill-slot="content-title">
    <h1>Country information</h1>
  </metal:fill-slot>

  <metal:fill-slot fill-slot="content-core">

    <div tal:content="structure context/text/output" tal:condition="context/text|nothing"></div>
    <p>EEA Member countries are at different stages of preparing, developing and implementing national <a aria-describedby="ui-tooltip-0" class="glossary-inline-term" href="http://climate-adapt.eea.europa.eu/glossary#linkAdaptation" target="_blank">adaptation</a> strategies and plans.</p>

    <p>See in the map below the information provided by each Member State of the European Union under the European mechanism for monitoring and reporting information relevant to climate change (Regulation (EU) No 525/2013).</p>

    <p>For other EEA Member countries, the information provided is based on voluntary submissions to EEA.</p>

    <p>Filter by any of the topics in the drop-down list ('Choose Thematic Map') and the map will indicate if links on the topic are available for each country. To navigate to the information just scroll over to one country on the map and a pop-up window will show the existing link(s) and allow clicking on them.</p>

    <div class="cover-richtext-tile tile-content row" id="countrymap-container">

      <!-- Select list with countries above map -->
      <div id="country-selector" class='col-xs-12 col-md-12'>
        Select a country to go to country's page:
        <select>
          <option value=''>Choose a country</option>
        </select>
      </div>

      <!-- The real map -->
      <div class="row map-wrapper">
        <div class="col-md-9 col-xs-12">
          <svg-container id="countries-map">
            <svg height="500" width="100%"></svg>
          </svg-container>
        </div>

        <!-- Sections selector on right side of map -->
        <div class="col-md-3 col-xs-12">
          <h2 class="choose-title">Choose thematic map:</h2>
          <div id="sections-selector"></div>

          <!-- Map legend underneath the map -->
          <div class="legend">
            <div class="legend-el">
              <span class="content-available legend-box"></span>
              <p class="legend-text"><span class="map-type"></span> available</p>
            </div>
            <div class="legend-el">
              <span class="no-content legend-box"></span>
              <p class="legend-text"><span class="map-type"></span> not available</p>
            </div>
            <div class="legend-el">
              <span class="no-focus legend-box"></span>
              <p class="legend-text">No content available</p>
            </div>
          </div>
        </div>

        <!-- Disclaimer in right side of map -->
        <div id="disclaimer">
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          [Disclaimer]
          <div id="hover-content">
            The information presented in these pages is based on the reporting according to the Monitoring Mechanism Regulation (Regulation (EU) No 525/2013) and updates by the EEA member countries
          </div>
        </div>
      </div>

    </div>

    <script src='++theme++climateadaptv2/static/countries/countriesmap.js'></script>
    <script type="text/javascript">
      $(document).ready(function() {
        console.log($('#sections-selector').children());
        // console.log($('input:radio[name="country-map-section"]'));
      });
    </script>
  </metal:fill-slot>
</metal:use-macro>
