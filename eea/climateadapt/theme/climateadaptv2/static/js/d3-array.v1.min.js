!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.d3=a.d3||{})}(this,function(a){"use strict";function b(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function c(a){var c;return 1===a.length&&(c=a,a=function(a,d){return b(c(a),d)}),{left:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(null==d&&(d=0),null==e&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function d(a,b){return[a,b]}function e(a){return null===a?NaN:+a}function f(a,b){var c,d,f=a.length,g=0,h=-1,i=0,j=0;if(null==b)for(;++h<f;)isNaN(c=e(a[h]))||(j+=(d=c-i)*(c-(i+=d/++g)));else for(;++h<f;)isNaN(c=e(b(a[h],h,a)))||(j+=(d=c-i)*(c-(i+=d/++g)));if(g>1)return j/(g-1)}function g(a,b){var c=f(a,b);return c?Math.sqrt(c):c}function h(a,b){var c,d,e,f=a.length,g=-1;if(null==b){for(;++g<f;)if(null!=(c=a[g])&&c>=c)for(d=e=c;++g<f;)null!=(c=a[g])&&(d>c&&(d=c),e<c&&(e=c))}else for(;++g<f;)if(null!=(c=b(a[g],g,a))&&c>=c)for(d=e=c;++g<f;)null!=(c=b(a[g],g,a))&&(d>c&&(d=c),e<c&&(e=c));return[d,e]}function i(a){return function(){return a}}function j(a){return a}function k(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f}function l(a,b,c){var d=(b-a)/Math.max(0,c),e=Math.floor(Math.log(d)/Math.LN10),f=d/Math.pow(10,e);return e>=0?(f>=y?10:f>=z?5:f>=A?2:1)*Math.pow(10,e):-Math.pow(10,-e)/(f>=y?10:f>=z?5:f>=A?2:1)}function m(a,b,c){var d=Math.abs(b-a)/Math.max(0,c),e=Math.pow(10,Math.floor(Math.log(d)/Math.LN10)),f=d/e;return f>=y?e*=10:f>=z?e*=5:f>=A&&(e*=2),b<a?-e:e}function n(a){return Math.ceil(Math.log(a.length)/Math.LN2)+1}function o(a,b,c){if(null==c&&(c=e),d=a.length){if((b=+b)<=0||d<2)return+c(a[0],0,a);if(b>=1)return+c(a[d-1],d-1,a);var d,f=(d-1)*b,g=Math.floor(f),h=+c(a[g],g,a);return h+(+c(a[g+1],g+1,a)-h)*(f-g)}}function p(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&d>c&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&d>c&&(d=c);return d}function q(a){if(!(e=a.length))return[];for(var b=-1,c=p(a,r),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d}function r(a){return a.length}var s=c(b),t=s.right,u=s.left,v=Array.prototype,w=v.slice,x=v.map,y=Math.sqrt(50),z=Math.sqrt(10),A=Math.sqrt(2);a.bisect=t,a.bisectRight=t,a.bisectLeft=u,a.ascending=b,a.bisector=c,a.cross=function(a,b,c){var e,f,g,h,i=a.length,j=b.length,k=new Array(i*j);for(null==c&&(c=d),e=g=0;e<i;++e)for(h=a[e],f=0;f<j;++f,++g)k[g]=c(h,b[f]);return k},a.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},a.deviation=g,a.extent=h,a.histogram=function(){function a(a){var e,f,g=a.length,h=new Array(g);for(e=0;e<g;++e)h[e]=b(a[e],e,a);var i=c(h),j=i[0],l=i[1],n=d(h,j,l);Array.isArray(n)||(n=m(j,l,n),n=k(Math.ceil(j/n)*n,l,n));for(var o=n.length;n[0]<=j;)n.shift(),--o;for(;n[o-1]>l;)n.pop(),--o;var p,q=new Array(o+1);for(e=0;e<=o;++e)(p=q[e]=[]).x0=e>0?n[e-1]:j,p.x1=e<o?n[e]:l;for(e=0;e<g;++e)j<=(f=h[e])&&f<=l&&q[t(n,f,0,o)].push(a[e]);return q}var b=j,c=h,d=n;return a.value=function(c){return arguments.length?(b="function"==typeof c?c:i(c),a):b},a.domain=function(b){return arguments.length?(c="function"==typeof b?b:i([b[0],b[1]]),a):c},a.thresholds=function(b){return arguments.length?(d="function"==typeof b?b:i(Array.isArray(b)?w.call(b):b),a):d},a},a.thresholdFreedmanDiaconis=function(a,c,d){return a=x.call(a,e).sort(b),Math.ceil((d-c)/(2*(o(a,.75)-o(a,.25))*Math.pow(a.length,-1/3)))},a.thresholdScott=function(a,b,c){return Math.ceil((c-b)/(3.5*g(a)*Math.pow(a.length,-1/3)))},a.thresholdSturges=n,a.max=function(a,b){var c,d,e=a.length,f=-1;if(null==b){for(;++f<e;)if(null!=(c=a[f])&&c>=c)for(d=c;++f<e;)null!=(c=a[f])&&c>d&&(d=c)}else for(;++f<e;)if(null!=(c=b(a[f],f,a))&&c>=c)for(d=c;++f<e;)null!=(c=b(a[f],f,a))&&c>d&&(d=c);return d},a.mean=function(a,b){var c,d=a.length,f=d,g=-1,h=0;if(null==b)for(;++g<d;)isNaN(c=e(a[g]))?--f:h+=c;else for(;++g<d;)isNaN(c=e(b(a[g],g,a)))?--f:h+=c;if(f)return h/f},a.median=function(a,c){var d,f=a.length,g=-1,h=[];if(null==c)for(;++g<f;)isNaN(d=e(a[g]))||h.push(d);else for(;++g<f;)isNaN(d=e(c(a[g],g,a)))||h.push(d);return o(h.sort(b),.5)},a.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(b=(d=a[e]).length;--b>=0;)c[--g]=d[b];return c},a.min=p,a.pairs=function(a,b){null==b&&(b=d);for(var c=0,e=a.length-1,f=a[0],g=new Array(e<0?0:e);c<e;)g[c]=b(f,f=a[++c]);return g},a.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},a.quantile=o,a.range=k,a.scan=function(a,c){if(d=a.length){var d,e,f=0,g=0,h=a[g];for(null==c&&(c=b);++f<d;)(c(e=a[f],h)<0||0!==c(h,h))&&(h=e,g=f);return 0===c(h,h)?g:void 0}},a.shuffle=function(a,b,c){for(var d,e,f=(null==c?a.length:c)-(b=null==b?0:+b);f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},a.sum=function(a,b){var c,d=a.length,e=-1,f=0;if(null==b)for(;++e<d;)(c=+a[e])&&(f+=c);else for(;++e<d;)(c=+b(a[e],e,a))&&(f+=c);return f},a.ticks=function(a,b,c){var d,e,f,g,h=-1;if(c=+c,(a=+a)==(b=+b)&&c>0)return[a];if((d=b<a)&&(e=a,a=b,b=e),0===(g=l(a,b,c))||!isFinite(g))return[];if(g>0)for(a=Math.ceil(a/g),b=Math.floor(b/g),f=new Array(e=Math.ceil(b-a+1));++h<e;)f[h]=(a+h)*g;else for(a=Math.floor(a*g),b=Math.ceil(b*g),f=new Array(e=Math.ceil(a-b+1));++h<e;)f[h]=(a-h)/g;return d&&f.reverse(),f},a.tickIncrement=l,a.tickStep=m,a.transpose=q,a.variance=f,a.zip=function(){return q(arguments)},Object.defineProperty(a,"__esModule",{value:!0})});